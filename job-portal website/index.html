<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini LinkedIn - Job Portal</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <nav>
            <h1>Job Portal</h1>
            <div class="nav-links">
                <a href="index.html" class="active">All Jobs</a>
                <a href="saved.html">Saved Jobs</a>
            </div>
        </nav>
    </header>

    <main>
        <div class="filters">
            <select id="locationFilter">
                <option value="">All Locations</option>
            </select>
            <select id="roleFilter">
                <option value="">All Roles</option>
            </select>
            <input type="text" id="searchInput" placeholder="Search jobs...">
            <button id="clearFilters">Clear</button>
        </div>

        <div class="stats">
            <span id="totalJobs">0</span> jobs found
            <span id="applicationCount">0</span> applications
        </div>

        <div id="jobListings" class="job-grid">
            <div style="grid-column: 1/-1; text-align: center; padding: 4rem; color: #666;">
                Loading jobs...
            </div>
        </div>
    </main>

    <script>
        // ALL CODE IN ONE FILE - NO EXTERNAL JS NEEDED
        const jobs = [
            {
                id: 1, title: "Frontend Developer", company: "TechCorp", location: "Bangalore", 
                role: "Developer", skills: ["React", "JavaScript", "CSS", "HTML"], 
                applications: 23, posted: "2 days ago"
            },
            {
                id: 2, title: "Backend Engineer", company: "DataSync", location: "Delhi", 
                role: "Developer", skills: ["Node.js", "Python", "MongoDB", "AWS"], 
                applications: 15, posted: "1 week ago"
            },
            {
                id: 3, title: "Product Manager", company: "InnovateX", location: "Mumbai", 
                role: "Manager", skills: ["Agile", "Product Roadmaps", "Analytics"], 
                applications: 8, posted: "3 days ago"
            },
            {
                id: 4, title: "DevOps Engineer", company: "CloudPeak", location: "Hyderabad", 
                role: "DevOps", skills: ["Docker", "Kubernetes", "CI/CD", "Terraform"], 
                applications: 12, posted: "5 days ago"
            },
            {
                id: 5, title: "UI/UX Designer", company: "DesignHub", location: "Bangalore", 
                role: "Designer", skills: ["Figma", "Adobe XD", "User Research"], 
                applications: 19, posted: "1 day ago"
            },
            {
                id: 6, title: "Data Scientist", company: "AnalyticsPro", location: "Chennai", 
                role: "Data", skills: ["Python", "Machine Learning", "SQL", "Tableau"], 
                applications: 7, posted: "4 days ago"
            }
        ];

        // Initialize localStorage
        if (!localStorage.getItem('savedJobs')) localStorage.setItem('savedJobs', '[]');
        if (!localStorage.getItem('appliedJobs')) localStorage.setItem('appliedJobs', '[]');

        function getSavedJobs() { return JSON.parse(localStorage.getItem('savedJobs') || '[]'); }
        function getAppliedJobs() { return JSON.parse(localStorage.getItem('appliedJobs') || '[]'); }

        function toggleSave(jobId) {
            const savedJobs = getSavedJobs();
            const index = savedJobs.indexOf(jobId);
            if (index > -1) {
                savedJobs.splice(index, 1);
                document.querySelector(`[data-job-id="${jobId}"] .save-btn`).classList.remove('saved');
                document.querySelector(`[data-job-id="${jobId}"] .save-btn`).textContent = 'Save';
            } else {
                savedJobs.push(jobId);
                document.querySelector(`[data-job-id="${jobId}"] .save-btn`).classList.add('saved');
                document.querySelector(`[data-job-id="${jobId}"] .save-btn`).textContent = 'Saved';
            }
            localStorage.setItem('savedJobs', JSON.stringify(savedJobs));
            updateStats();
        }

        function toggleApply(jobId) {
            const appliedJobs = getAppliedJobs();
            if (appliedJobs.includes(jobId)) return;
            
            appliedJobs.push(jobId);
            localStorage.setItem('appliedJobs', JSON.stringify(appliedJobs));
            
            const applyBtn = document.querySelector(`[data-job-id="${jobId}"] .apply-btn`);
            applyBtn.textContent = 'Applied!';
            applyBtn.classList.add('applied');
            applyBtn.disabled = true;
            updateStats();
        }

        function getFilters() {
            return {
                location: document.getElementById('locationFilter')?.value || '',
                role: document.getElementById('roleFilter')?.value || '',
                search: document.getElementById('searchInput')?.value.toLowerCase() || ''
            };
        }

        function filterJobs(filters) {
            return jobs.filter(job => {
                const matchesLocation = !filters.location || job.location === filters.location;
                const matchesRole = !filters.role || job.role === filters.role;
                const matchesSearch = !filters.search || 
                    job.title.toLowerCase().includes(filters.search) ||
                    job.company.toLowerCase().includes(filters.search) ||
                    job.skills.some(skill => skill.toLowerCase().includes(filters.search));
                return matchesLocation && matchesRole && matchesSearch;
            });
        }

        function populateFilters() {
            const locations = [...new Set(jobs.map(job => job.location))];
            const roles = [...new Set(jobs.map(job => job.role))];

            document.getElementById('locationFilter').innerHTML = 
                '<option value="">All Locations</option>' + 
                locations.map(loc => `<option value="${loc}">${loc}</option>`).join('');

            document.getElementById('roleFilter').innerHTML = 
                '<option value="">All Roles</option>' + 
                roles.map(role => `<option value="${role}">${role}</option>`).join('');
        }

        function createJobCard(job) {
            const savedJobs = getSavedJobs();
            const appliedJobs = getAppliedJobs();
            const isSaved = savedJobs.includes(job.id);
            const isApplied = appliedJobs.includes(job.id);
            
            return `
                <article class="job-card" data-job-id="${job.id}">
                    <h3 class="job-title">${job.title}</h3>
                    <div class="job-company">${job.company}</div>
                    <div class="job-location">üìç ${job.location}</div>
                    <div class="job-role">üíº ${job.role}</div>
                    <div class="job-skills">
                        ${job.skills.map(skill => `<span class="skill-tag">${skill}</span>`).join('')}
                    </div>
                    <div style="margin: 1rem 0; font-size: 0.9rem; color: #666;">
                        Applications: ${job.applications} | Posted: ${job.posted}
                    </div>
                    <div class="job-actions">
                        <button class="btn btn-primary apply-btn ${isApplied ? 'applied' : ''}" 
                                ${isApplied ? 'disabled' : ''} onclick="toggleApply(${job.id})">
                            ${isApplied ? 'Applied!' : 'Apply Now'}
                        </button>
                        <button class="btn btn-secondary save-btn ${isSaved ? 'saved' : ''}" 
                                onclick="toggleSave(${job.id})">
                            ${isSaved ? 'Saved' : 'Save'}
                        </button>
                    </div>
                </article>
            `;
        }

        function renderJobs() {
            const filters = getFilters();
            const filteredJobs = filterJobs(filters);
            
            document.getElementById('jobListings').innerHTML = filteredJobs.map(createJobCard).join('');
            document.getElementById('totalJobs').textContent = filteredJobs.length;
            document.getElementById('applicationCount').textContent = getAppliedJobs().length;
        }

        function updateStats() {
            document.getElementById('applicationCount').textContent = getAppliedJobs().length;
        }

        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            populateFilters();
            renderJobs();
            
            // Event listeners
            document.getElementById('locationFilter').addEventListener('change', renderJobs);
            document.getElementById('roleFilter').addEventListener('change', renderJobs);
            document.getElementById('searchInput').addEventListener('input', renderJobs);
            document.getElementById('clearFilters').addEventListener('click', function() {
                document.getElementById('locationFilter').value = '';
                document.getElementById('roleFilter').value = '';
                document.getElementById('searchInput').value = '';
                renderJobs();
            });
        });
    </script>
</body>
</html>
